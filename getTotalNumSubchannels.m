function totalNumSubchannels = getTotalNumSubchannels(BandwidthMHz,SubchannelSize,SCS)
    % Check the maximum transmission bandwidth configuration
    % see Table 5.3.2-1 TS 38.101-1
    if (SCS == 15)
        assert((BandwidthMHz == 5) || (BandwidthMHz == 10) || (BandwidthMHz == 15) || ...
            (BandwidthMHz == 20) || (BandwidthMHz == 25) || (BandwidthMHz == 30) || ...
            (BandwidthMHz == 40) || (BandwidthMHz == 50), "Invalid transmission bandwidth for 15 kHz SCS");
    elseif (SCS == 30)
        assert((BandwidthMHz == 5) || (BandwidthMHz == 10) || (BandwidthMHz == 15) || ...
            (BandwidthMHz == 20) || (BandwidthMHz == 25) || (BandwidthMHz == 30) || ...
            (BandwidthMHz == 40) || (BandwidthMHz == 50) || (BandwidthMHz == 60) || ...
            (BandwidthMHz == 70) || (BandwidthMHz == 80) || (BandwidthMHz == 90) || ...
            (BandwidthMHz == 100), "Invalid transmission bandwidth for 30 kHz SCS");        
    else
        assert((BandwidthMHz == 10) || (BandwidthMHz == 15) || (BandwidthMHz == 20) || ...
            (BandwidthMHz == 25) || (BandwidthMHz == 30) || (BandwidthMHz == 40) || ...
            (BandwidthMHz == 50) || (BandwidthMHz == 60) || (BandwidthMHz == 70) || ...
            (BandwidthMHz == 80) || (BandwidthMHz == 90) || (BandwidthMHz == 100), ...
            "Invalid transmission bandwidth for 60 kHz SCS");       
    end

    % Table 5.3.2-1 TS 38.101-1
    BandwidthMatrix = [25 52 79 106 133 160 216 270 nan nan nan nan nan;
        11 24 38 51 65 78 106 133 162 189 217 245 273;
        nan 11 18 24 31 38 51 65 79 93 107 121 135];
        
    BandwidthTable = array2table(BandwidthMatrix, ...
        'VariableNames',{'5','10','15','20','25','30','40','50','60','70','80','90','100'}, ...
        'RowNames',{'15','30','60'});

    totalNumPRBs = table2array(BandwidthTable(int2str(SCS),int2str(BandwidthMHz)));
    totalNumSubchannels = floor(totalNumPRBs/SubchannelSize);
end